# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
- HTMLペイントアプリ

### 1.2 プロジェクト目的
- ブラウザ上で動作するペイント・お絵描きアプリケーションを開発する

### 1.3 背景
- Webブラウザだけでペイント機能を利用したいユーザーのニーズに応えるため

### 1.4 対象期間
- 開始日: 
- 終了日: 

## 2. システム概要

### 2.1 システム名
- HTMLペイントアプリ

### 2.2 システム概要
- HTML5 Canvas、CSS、JavaScriptを使用したWebベースのペイントアプリケーション

### 2.3 システムの目的
- ユーザーがブラウザ上で自由に絵を描き、編集・保存できる環境を提供する

### 2.4 システムの範囲
- 単一のHTMLファイルで完結するスタンドアロン型ペイントアプリ
- 800x800ピクセルの正方形キャンバスを持つ描画エリア

## 3. 関係者

### 3.1 ステークホルダー
| 役割 | 氏名/組織 | 責任範囲 |
|------|-----------|----------|
|      |           |          |

### 3.2 利用者
- 一般ユーザー（年齢問わず、お絵描きやスケッチを楽しみたい人）

## 4. 機能要件

### 4.1 機能一覧
| No. | 機能名 | 概要 | 優先度 |
|-----|--------|------|--------|
| 1   | ペン描画 | マウス/タッチで線を描く | 高 |
| 2   | ブラシサイズ変更 | 線の太さを調整 | 高 |
| 3   | 色選択 | 描画色を選択 | 高 |
| 4   | 消しゴム | 描いた内容を消去 | 高 |
| 5   | 全消去 | キャンバス全体をクリア | 中 |
| 6   | 画像ダウンロード | 描いた絵をPNG形式でダウンロード | 中 |
| 7   | 読み込み | 画像ファイルを開いて編集 | 低 |
| 8   | 図形描画 | 直線、円、矩形の描画 | 低 |
| 9   | 元に戻す | 操作を取り消し | 低 |

### 4.2 詳細機能要件

#### 4.2.1 ペン描画機能
- **概要**: マウスまたはタッチ操作で自由曲線を描画する
- **入力**: マウスドラッグ、タッチドラッグ
- **出力**: キャンバス上への線描画
- **処理内容**: マウス/タッチの座標を追跡し、連続した線を描画
- **前提条件**: キャンバスが表示されている
- **事後条件**: 描画した線がキャンバスに表示される

#### 4.2.2 ブラシサイズ変更機能
- **概要**: 描画する線の太さを調整する
- **入力**: スライダーまたは数値入力
- **出力**: 線の太さの変更
- **処理内容**: Canvas APIのlineWidthプロパティを変更
- **前提条件**: なし
- **事後条件**: 次回描画時から新しい太さが適用される

#### 4.2.3 色選択機能
- **概要**: 描画色を選択・変更する
- **入力**: カラーピッカーまたは色パレット
- **出力**: 描画色の変更
- **処理内容**: Canvas APIのstrokeStyleプロパティを変更
- **前提条件**: なし
- **事後条件**: 次回描画時から新しい色が適用される

#### 4.2.4 消しゴム機能
- **概要**: 描画した内容を部分的に消去する
- **入力**: マウスドラッグ、タッチドラッグ
- **出力**: キャンバス上の内容消去
- **処理内容**: globalCompositeOperationを'destination-out'に設定して描画
- **前提条件**: キャンバスに描画内容がある
- **事後条件**: 指定した箇所の描画内容が消去される

#### 4.2.5 全消去機能
- **概要**: キャンバス全体の描画内容をクリアする
- **入力**: クリアボタンのクリック
- **出力**: 白紙のキャンバス
- **処理内容**: Canvas APIのclearRectメソッドでキャンバス全体をクリア
- **前提条件**: なし
- **事後条件**: キャンバスが初期状態（白紙）に戻る

#### 4.2.6 画像ダウンロード機能
- **概要**: 描いた絵を画像ファイルとして端末にダウンロード保存する
- **入力**: ダウンロードボタンのクリック
- **出力**: PNG形式の画像ファイル
- **処理内容**: 
  - CanvasのtoDataURLメソッドでキャンバス内容をデータURL形式に変換
  - 一時的なaタグ要素を作成し、hrefにデータURLを設定
  - downloadAttribute属性でファイル名を指定（例：paint_YYYYMMDD_HHMMSS.png）
  - プログラマティックにクリックイベントを発火してダウンロード実行
  - 一時要素を削除
- **前提条件**: キャンバスに描画内容がある（空でも保存可能）
- **事後条件**: 
  - 描画内容がPNGファイルとして端末のダウンロードフォルダに保存される
  - ファイル名は日時付きの自動生成
  - ダウンロード完了の視覚的フィードバック（オプション）

#### 4.2.7 キャンバス全消去機能
- **概要**: キャンバス全体の描画内容を完全にクリアして白紙状態にする
- **入力**: 全消去ボタンのクリック
- **出力**: 白紙のキャンバス
- **処理内容**: 
  - 確認ダイアログを表示（「本当に全て消去しますか？」）
  - ユーザーが「OK」を選択した場合のみ実行
  - Canvas APIのclearRectメソッドでキャンバス全体をクリア
  - キャンバスを白色で塗りつぶし
- **前提条件**: なし
- **事後条件**: キャンバスが初期状態（白紙）に戻る、描画履歴もクリア

## 5. 非機能要件

### 5.1 性能要件
- **応答時間**: 描画操作に対する遅延は50ms以下
- **処理能力**: 800x800ピクセルのキャンバスでスムーズな描画が可能
- **同時接続数**: ローカルファイルのため該当なし

### 5.2 可用性要件
- **稼働時間**: ブラウザが動作している限り利用可能
- **ダウンタイム**: なし

### 5.3 セキュリティ要件
- **認証**: 不要（ローカル実行）
- **認可**: 不要（ローカル実行）
- **暗号化**: 不要（機密データなし）
- **ログ**: 不要

### 5.4 運用・保守要件
- **バックアップ**: ユーザーが作成した絵は各自で保存
- **監視**: 不要
- **保守**: HTMLファイルの更新のみ

### 5.5 拡張性要件
- **ユーザー数拡張**: 単一ユーザー向けのため該当なし
- **データ量拡張**: ブラウザのメモリ容量に依存
- **機能拡張**: モジュール化された設計で新機能追加が容易

## 6. 制約条件

### 6.1 技術制約
- HTML5、CSS3、JavaScript（ES6以降）のみ使用
- 外部ライブラリは使用しない
- 単一HTMLファイルで完結する構成

### 6.2 予算制約
- 開発費用: 0円（個人開発）

### 6.3 スケジュール制約
- 特になし

### 6.4 人的リソース制約
- 開発者1名

## 7. 外部システム連携

### 7.1 連携システム一覧
| システム名 | 連携方法 | 連携内容 |
|------------|----------|----------|
| なし       | -        | -        |

## 8. データ要件

### 8.1 データ項目一覧
| データ名 | 型 | 必須 | 備考 |
|----------|----|----- |------|
| 描画データ | ImageData | × | キャンバス上の描画内容 |
| ブラシサイズ | Number | ○ | 1-50の範囲 |
| 描画色 | String | ○ | HEX形式（#RRGGBB） |
| ツールモード | String | ○ | pen/eraser |

### 8.2 データ保持期間
- セッション中のみ（ページリロード時にリセット）
- 保存機能で永続化可能

## 9. UI/UX要件

### 9.1 画面要件
- **対象デバイス**: PC（マウス操作）、タブレット（タッチ操作）
- **対応ブラウザ**: Chrome、Firefox、Safari、Edge（最新版）
- **キャンバスサイズ**: 800x800ピクセル（正方形）
- **レスポンシブ対応**: 900px以上の画面幅で最適化（キャンバス+UI領域）

### 9.2 ユーザビリティ要件
- 直感的で分かりやすいツールボタン配置
- 描画中のスムーズなレスポンス
- 誤操作を防ぐ確認ダイアログ（全消去時など）

## 10. テスト要件

### 10.1 テスト種別
- [x] 手動テスト（機能確認）
- [ ] 単体テスト
- [ ] 結合テスト
- [ ] システムテスト
- [x] ユーザビリティテスト

### 10.2 テスト環境
- 各種ブラウザでの動作確認
- PC・タブレットでの操作確認

## 11. 移行要件

### 11.1 データ移行
- 既存データなし（新規開発）

### 11.2 システム移行
- 該当なし（新規開発）

## 12. リスク

| リスク項目 | 影響度 | 発生確率 | 対策 |
|------------|--------|----------|------|
| ブラウザ互換性問題 | 中 | 低 | 主要ブラウザでの事前テスト |
| 描画パフォーマンス | 中 | 中 | 最適化されたCanvas API使用 |
| メモリ不足 | 低 | 低 | キャンバスサイズの制限 |

## 13. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
|      |      |        |      |

---
作成日: 
最終更新日: 
バージョン: 1.0